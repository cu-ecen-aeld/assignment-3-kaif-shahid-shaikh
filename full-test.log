+ set -e
++ dirname ./full-test.sh
+ cd .
++ pwd
+ test_dir=/home/kayf_06/assignment-3-kaif-shahid-shaikh
+ echo 'starting test with SKIP_BUILD="" and DO_VALIDATE=""'
starting test with SKIP_BUILD="" and DO_VALIDATE=""
+ logfile=test.sh.log
+ exec
++ tee -i -a test.sh.log
++ tee -i -a test.sh.log
++ whoami
+ echo 'Running test with user kayf_06'
+ set +e
+ ./unit-test.sh
Running test with user kayf_06
-- Generating ;/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_hello_Runner.c;/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_assignment_validate_Runner.c from test/assignment1/Test_hello.c;test/assignment1/Test_assignment_validate.c
-- Building executable including ;/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_hello_Runner.c;/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_assignment_validate_Runner.c test/assignment1/Test_hello.c;test/assignment1/Test_assignment_validate.c and ../examples/autotest-validate/autotest-validate.c
-- Configuring done
-- Generating done
-- Build files have been written to: /home/kayf_06/assignment-3-kaif-shahid-shaikh/build
[ 10%] Building C object assignment-autotest/Unity/src/CMakeFiles/unity.dir/unity.c.o
[ 20%] Linking C static library libunity.a
[ 20%] Built target unity
[ 30%] Generating ../../assignment-autotest/test/assignment1/Test_hello_Runner.c, ../../assignment-autotest/test/assignment1/Test_assignment_validate_Runner.c, ../../assignment-autotest/test/unity_runner.c
Test files for auto dependency generation test/assignment1/Test_hello.c test/assignment1/Test_assignment_validate.c
Autogenerating runner for test/assignment1/Test_hello.c
Autogenerating runner for test/assignment1/Test_assignment_validate.c
Autogenerating test/unity_runner.c
[ 40%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/test/assignment1/Test_hello.c.o
[ 50%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/test/assignment1/Test_assignment_validate.c.o
[ 60%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/test/assignment1/Test_hello_Runner.c.o
[ 70%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/test/assignment1/Test_assignment_validate_Runner.c.o
[ 80%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/__/examples/autotest-validate/autotest-validate.c.o
[ 90%] Building C object assignment-autotest/CMakeFiles/assignment-autotest.dir/test/unity_runner.c.o
[100%] Linking C executable assignment-autotest
[100%] Built target assignment-autotest
/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_hello.c:6:test_hello:INFO: Hello!  Your unity setup is working!
/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_hello.c:4:test_hello:PASS

-----------------------
1 Tests 0 Failures 0 Ignored 
OK
/home/kayf_06/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment1/Test_assignment_validate.c:9:test_assignment_validate:PASS

-----------------------
1 Tests 0 Failures 0 Ignored 
OK
+ unit_test_rc=0
+ '[' 0 -ne 0 ']'
+ '[' -f conf/assignment.txt ']'
++ cat conf/assignment.txt
+ assignment=assignment6
+ '[' -f ./assignment-autotest/test/assignment6/assignment-test.sh ']'
+ echo 'Executing assignment test script'
+ ./assignment-autotest/test/assignment6/assignment-test.sh /home/kayf_06/assignment-3-kaif-shahid-shaikh
Executing assignment test script
~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
~/assignment-3-kaif-shahid-shaikh/server ~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
rm -f aesdsocket *.o
cc -Wall -Wextra -Werror -O2 -pthread -o aesdsocket aesdsocket.c -pthread
~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh/server ~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
Testing target localhost on port 9000
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string abcdefg
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string hijklmnop
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string 1234567890
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string 9876543210

Spawning three processes to ensure multithreaded writes work as expected
Process 1 writes One best book is equal to a hundred good friends, but one good friend is equal to a library
Process 2 writes If you want to shine like a sun, first burn like a sun
Process 3 writes Never stop fighting until you arrive at your destined place - that is, the unique you
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 1
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 1
Waiting for sends to compete on all processes
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 1
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 2
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 2
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 2
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 3
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 3
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 3
Process 3 complete
Process 2 complete
Process 1 complete
WARNING: tempfile is deprecated; consider using mktemp instead.
multithreaded test complete with success

Testing the timer functionality
WARNING: tempfile is deprecated; consider using mktemp instead.
No of timestamps currently in server file: 0
No of timestamps expected after a delay of 21 seconds is 2
No of timestamps found in file: 2
Congrats! Tests completed with success
~/assignment-3-kaif-shahid-shaikh/server ~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
Waiting for aesdsocket application with pid 13899 to terminate
Re-running sockettest.sh with valgrind
~/assignment-3-kaif-shahid-shaikh/server ~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh/server ~/assignment-3-kaif-shahid-shaikh/assignment-autotest/test/assignment6 ~/assignment-3-kaif-shahid-shaikh
Starting valgrind
Waiting for aesdsocket application to start
timestamp:wait-for-startup
Testing target localhost on port 9000
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string abcdefg
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string hijklmnop
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string 1234567890
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
WARNING: tempfile is deprecated; consider using mktemp instead.
sending string 9876543210

Spawning three processes to ensure multithreaded writes work as expected
Process 1 writes One best book is equal to a hundred good friends, but one good friend is equal to a library
Process 2 writes If you want to shine like a sun, first burn like a sun
Process 3 writes Never stop fighting until you arrive at your destined place - that is, the unique you
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 1
Waiting for sends to compete on all processes
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 1
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 1
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 2
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 2
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 2
Sending string Never stop fighting until you arrive at your destined place - that is, the unique you from process 3: instance 3
Sending string If you want to shine like a sun, first burn like a sun from process 2: instance 3
Sending string If you want to shine like a sun, first burn like a sun from process 1: instance 3
Process 1 complete
Process 3 complete
Process 2 complete
WARNING: tempfile is deprecated; consider using mktemp instead.
multithreaded test complete with success

Testing the timer functionality
WARNING: tempfile is deprecated; consider using mktemp instead.
No of timestamps currently in server file: 1
No of timestamps expected after a delay of 21 seconds is 3
No of timestamps found in file: 2
Differences found in the number of timestamps occurances
Test complete with failure. Check your timer functionality
The server returned:
timestamp:Fri, 03 Oct 2025 13:12:38 -0600
timestamp:Fri, 03 Oct 2025 13:12:48 -0600
test_socket_timer
[0;31mValidation Error:sockettest.sh returned 1 attempting to run against native compiled aesdsocket instance running under valgrind[0m
Stopping valgrind and aesdsocket process at pid 14023
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Waiting for aesdsocket and valgrind to exit
Valgrind and aesdsocket complete
deleting marker file /tmp/tmp.KaYM8aCwQb
Validation failed with error list :sockettest.sh returned 1 attempting to run against native compiled aesdsocket instance running under valgrind
+ rc=1
+ '[' 1 -eq 0 ']'
+ echo 'Test of assignment assignment6 failed with rc=1'
+ exit 1
Test of assignment assignment6 failed with rc=1
